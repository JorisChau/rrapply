<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Reimplementation of base-R's rapply — rrapply • rrapply</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Reimplementation of base-R's rapply — rrapply" />
<meta property="og:description" content="rrapply is a reimplemented and extended version of rapply to recursively apply a function f to 
a set of elements of a list and deciding how the result is structured." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rrapply</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/when-to-use-rrapply.html">Efficient list recursion with rrapply</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JorisChau/rrapply/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reimplementation of base-R's rapply</h1>
    <small class="dont-index">Source: <a href='https://github.com/JorisChau/rrapply/blob/master/R/rrapply.R'><code>R/rrapply.R</code></a></small>
    <div class="hidden name"><code>rrapply.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>rrapply</code> is a reimplemented and extended version of <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code> to recursively apply a function <code>f</code> to 
a set of elements of a list and deciding <em>how</em> the result is structured.</p>
    </div>

    <pre class="usage"><span class='fu'>rrapply</span>(
  <span class='no'>object</span>,
  <span class='no'>condition</span>,
  <span class='no'>f</span>,
  <span class='kw'>classes</span> <span class='kw'>=</span> <span class='st'>"ANY"</span>,
  <span class='kw'>deflt</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"replace"</span>, <span class='st'>"list"</span>, <span class='st'>"unlist"</span>, <span class='st'>"prune"</span>, <span class='st'>"flatten"</span>),
  <span class='kw'>feverywhere</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>dfaslist</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>a <code><a href='https://rdrr.io/r/base/list.html'>list</a></code> or <code><a href='https://rdrr.io/r/base/expression.html'>expression</a></code>, i.e., &#8220;list-like&#8221;.</p></td>
    </tr>
    <tr>
      <th>condition</th>
      <td><p>a condition <code><a href='https://rdrr.io/r/base/function.html'>function</a></code> of one &#8220;principal&#8221; argument and optional special arguments <code>.xname</code> and/or 
<code>.xpos</code> (see &#8216;Details&#8217;), passing further arguments via <code>...</code>.</p></td>
    </tr>
    <tr>
      <th>f</th>
      <td><p>a <code><a href='https://rdrr.io/r/base/function.html'>function</a></code> of one &#8220;principal&#8221; argument and optional special arguments <code>.xname</code> and/or <code>.xpos</code> 
(see &#8216;Details&#8217;), passing further arguments via <code>...</code>.</p></td>
    </tr>
    <tr>
      <th>classes</th>
      <td><p>character vector of <code><a href='https://rdrr.io/r/base/class.html'>class</a></code> names, or
    <code>"ANY"</code> to match any class.</p></td>
    </tr>
    <tr>
      <th>deflt</th>
      <td><p>the default result (only used if <code>how = "list"</code> or <code>how = "unlist"</code>).</p></td>
    </tr>
    <tr>
      <th>how</th>
      <td><p>character string partially matching the five possibilities given: see &#8216;Details&#8217;.</p></td>
    </tr>
    <tr>
      <th>feverywhere</th>
      <td><p>logical value to apply <code>f</code> to all (&#8220;list-like&#8221; or non &#8220;list-like&#8221;) elements of <code>object</code>.</p></td>
    </tr>
    <tr>
      <th>dfaslist</th>
      <td><p>logical value to treat data.frames as &#8220;list-like&#8221; object.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments passed to the call to <code>f</code> and <code>condition</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If <code>how = "unlist"</code>, a vector as in <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code>. If <code>how = "list"</code> or <code>how = "replace"</code>, &#8220;list-like&#8221; of similar 
structure as <code>object</code> as in <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code>. If <code>how = "prune"</code>, a pruned &#8220;list-like&#8221; object of similar structure as <code>object</code>
with pruned list elements based on <code>classes</code> and <code>condition</code>. If <code>how = "flatten"</code>, an unnested pruned list with pruned list elements 
based on <code>classes</code> and <code>condition</code>.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p><code>rrapply</code> allows the <code>f</code> function argument to be missing, in which case no function is applied to the list 
elements.</p>
    <h2 class="hasAnchor" id="list-pruning"><a class="anchor" href="#list-pruning"></a>List pruning</h2>

    

<p>In addition to <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code>'s modes to set <code>how</code> equal to <code>"replace"</code>, <code>"list"</code> or <code>"unlist"</code>, 
two choices <code>"prune"</code> and <code>"flatten"</code> are available. <code>how = "prune"</code> filters all list elements not subject to 
application of <code>f</code> from the list <code>object</code>. The original list structure is retained, similar to the non-pruned options 
<code>how = "replace"</code> or <code>how = "list"</code>. <code>how = "flatten"</code> is an efficient way to return a flattened unnested version 
of the pruned list.</p>
    <h2 class="hasAnchor" id="condition-function"><a class="anchor" href="#condition-function"></a>Condition function</h2>

    

<p>Both <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code> and <code>rrapply</code> allow to apply <code>f</code> to list elements of certain classes via the <code>classes</code> argument. 
<code>rrapply</code> generalizes this concept via an additional <code>condition</code> argument, which accepts any function to use as a condition 
or predicate to select list elements to which <code>f</code> is applied. Conceptually, the <code>f</code> function is applied to all list elements for 
which the <code>condition</code> function exactly evaluates to <code>TRUE</code> similar to <code><a href='https://rdrr.io/r/base/Logic.html'>isTRUE</a></code>. If the condition function is missing, 
<code>f</code> is applied to all list elements.
Since the <code>condition</code> function generalizes the <code>classes</code> argument, it is allowed to use the <code>deflt</code> argument 
together with <code>how = "list"</code> or <code>how = "unlist"</code> to set a default value to all list elements for which the <code>condition</code> does 
not evaluate to <code>TRUE</code>.</p>
    <h2 class="hasAnchor" id="correct-use-of-"><a class="anchor" href="#correct-use-of-"></a>Correct use of <code>...</code></h2>

    

<p>The principal argument of the <code>f</code> and <code>condition</code> functions evaluates to the content of the list element. Any further arguments to 
<code>f</code> and <code>condition</code> (besides the special arguments <code>.xname</code> and <code>.xpos</code> discussed below) supplied via the dots <code>...</code> 
argument need to be defined as function arguments in <em>both</em> the <code>f</code> and <code>condition</code> function (if existing), even if they are not
 used in the function itself. See also the &#8216;Examples&#8217; section.</p>
    <h2 class="hasAnchor" id="special-arguments-xname-and-xpos"><a class="anchor" href="#special-arguments-xname-and-xpos"></a>Special arguments <code>.xname</code> and <code>.xpos</code></h2>

    

<p>The <code>f</code> and <code>condition</code> functions accept two special arguments <code>.xname</code> and <code>.xpos</code> in addition to the first principal argument. 
The <code>.xname</code> argument evaluates to the name of the list element. The <code>.xpos</code> argument evaluates to the position of the element in the nested 
list structured as an integer vector. That is, if <code>x = list(list("y", "z"))</code>, then an <code>.xpos</code> location of <code><a href='https://rdrr.io/r/base/c.html'>c(1, 2)</a></code> corresponds 
to the list element <code>x[[c(1, 2)]]</code>. The names <code>.xname</code> and <code>.xpos</code> need to be explicitly included as function arguments in <code>f</code> and 
<code>condition</code> (in addition to the principal argument). See the package vignette for example uses of the <code>.xname</code> and 
<code>.xpos</code> variables.</p>
    <h2 class="hasAnchor" id="list-node-aggregation"><a class="anchor" href="#list-node-aggregation"></a>List node aggregation</h2>

    

<p>By default, <code>rrapply</code> applies the <code>f</code> function only to leaf elements by recursing into any list-like element that is encountered. 
If <code>feverywhere = TRUE</code>, this behavior is overridden and the <code>f</code> function will be applied to any element of <code>object</code> (e.g. a sublist) 
that satisfies the <code>condition</code> function. If the <code>condition</code> function is not satisfied for a list-like 
element, <code>rrapply</code> will recurse further into the sublist, apply the <code>f</code> function to the nodes that 
satisfy the <code>condition</code>, and so on. The primary use of <code>feverywhere = TRUE</code> is to aggregate list nodes or summarize sublists of <code>object</code>. 
Additional examples can be found in the package vignette.</p>
    <h2 class="hasAnchor" id="data-frames-as-lists"><a class="anchor" href="#data-frames-as-lists"></a>Data.frames as lists</h2>

    

<p>If <code>feverywhere = FALSE</code>, <code>rrapply</code> recurses into all list-like objects equivalent to <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code>. 
Since data.frames are list-like objects, the <code>f</code> function will descend into the individual columns of a data.frame. 
If <code>dfaslist = FALSE</code>, data.frames are no longer viewed as lists and the <code>f</code> and <code>condition</code> functions are 
applied directly to the data.frame itself and not its columns.</p>
    <h2 class="hasAnchor" id="list-attributes"><a class="anchor" href="#list-attributes"></a>List attributes</h2>

    

<p>In <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code> intermediate list attributes (not located at the leafs) are kept when <code>how = "replace"</code>, but are dropped when 
<code>how = "list"</code>. To avoid unexpected behavior, <code>rrapply</code> always preserves intermediate list attributes when using <code>how = "replace"</code>, 
<code>how = "list"</code> or <code>how = "prune"</code>. If <code>how = "flatten"</code> or <code>how = "unlist"</code> intermediate list attributes cannot be preserved as 
the result is no longer a nested list.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Example data</span>

<span class='co'>## Nested list of renewable energy (%) of total energy consumption per country in 2016</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='st'>"renewable_energy_by_country"</span>)
<span class='co'>## Subset values for countries and areas in Oceania</span>
<span class='no'>renewable_oceania</span> <span class='kw'>&lt;-</span> <span class='no'>renewable_energy_by_country</span><span class='kw'>[[</span><span class='st'>"World"</span>]][<span class='st'>"Oceania"</span>]

<span class='co'># List pruning</span>

<span class='co'>## Drop all logical NA's while preserving list structure </span>
<span class='no'>na_drop_oceania</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_oceania</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='no'>x</span>,
  <span class='kw'>classes</span> <span class='kw'>=</span> <span class='st'>"numeric"</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"prune"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>na_drop_oceania</span>, <span class='kw'>list.len</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ Oceania:List of 4
#&gt;   ..$ Australia and New Zealand:List of 2
#&gt;   .. ..$ Australia  : num 9.32
#&gt;   .. ..$ New Zealand: num 32.8
#&gt;   ..$ Melanesia                :List of 5
#&gt;   .. ..$ Fiji            : num 24.4
#&gt;   .. ..$ New Caledonia   : num 4.03
#&gt;   .. ..$ Papua New Guinea: num 50.3
#&gt;   .. .. [list output truncated]
#&gt;   ..$ Micronesia               :List of 7
#&gt;   .. ..$ Guam                            : num 3.03
#&gt;   .. ..$ Kiribati                        : num 45.4
#&gt;   .. ..$ Marshall Islands                : num 11.8
#&gt;   .. .. [list output truncated]
#&gt;   .. [list output truncated]</div><div class='input'>
<span class='co'>## Drop all logical NA's and return unnested list</span>
<span class='no'>na_drop_oceania2</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_oceania</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='no'>x</span>,
  <span class='kw'>classes</span> <span class='kw'>=</span> <span class='st'>"numeric"</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"flatten"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>na_drop_oceania2</span>, <span class='kw'>list.len</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 22
#&gt;  $ Australia                       : num 9.32
#&gt;  $ New Zealand                     : num 32.8
#&gt;  $ Fiji                            : num 24.4
#&gt;  $ New Caledonia                   : num 4.03
#&gt;  $ Papua New Guinea                : num 50.3
#&gt;  $ Solomon Islands                 : num 65.7
#&gt;  $ Vanuatu                         : num 33.7
#&gt;  $ Guam                            : num 3.03
#&gt;  $ Kiribati                        : num 45.4
#&gt;  $ Marshall Islands                : num 11.8
#&gt;   [list output truncated]</div><div class='input'>
<span class='co'># Condition function</span>

<span class='co'>## Drop all NA elements using condition function</span>
<span class='no'>na_drop_oceania3</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_oceania</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/funprog.html'>Negate</a></span>(<span class='no'>is.na</span>),
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='no'>x</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"prune"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>na_drop_oceania3</span>, <span class='kw'>list.len</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ Oceania:List of 4
#&gt;   ..$ Australia and New Zealand:List of 2
#&gt;   .. ..$ Australia  : num 9.32
#&gt;   .. ..$ New Zealand: num 32.8
#&gt;   ..$ Melanesia                :List of 5
#&gt;   .. ..$ Fiji            : num 24.4
#&gt;   .. ..$ New Caledonia   : num 4.03
#&gt;   .. ..$ Papua New Guinea: num 50.3
#&gt;   .. .. [list output truncated]
#&gt;   ..$ Micronesia               :List of 7
#&gt;   .. ..$ Guam                            : num 3.03
#&gt;   .. ..$ Kiribati                        : num 45.4
#&gt;   .. ..$ Marshall Islands                : num 11.8
#&gt;   .. .. [list output truncated]
#&gt;   .. [list output truncated]</div><div class='input'>
<span class='co'>## Replace NA elements by a new value via the ... argument</span>
<span class='co'>## NB: the 'newvalue' argument should be present as function </span>
<span class='co'>## argument in both 'f' and 'condition', even if unused.</span>
<span class='no'>na_zero_oceania</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_oceania</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>newvalue</span>) <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span>(<span class='no'>x</span>),
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>newvalue</span>) <span class='no'>newvalue</span>,
  <span class='kw'>newvalue</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"replace"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>na_zero_oceania</span>, <span class='kw'>list.len</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ Oceania:List of 4
#&gt;   ..$ Australia and New Zealand:List of 6
#&gt;   .. ..$ Australia                        : num 9.32
#&gt;   .. ..$ Christmas Island                 : num 0
#&gt;   .. ..$ Cocos (Keeling) Islands          : num 0
#&gt;   .. .. [list output truncated]
#&gt;   ..$ Melanesia                :List of 5
#&gt;   .. ..$ Fiji            : num 24.4
#&gt;   .. ..$ New Caledonia   : num 4.03
#&gt;   .. ..$ Papua New Guinea: num 50.3
#&gt;   .. .. [list output truncated]
#&gt;   ..$ Micronesia               :List of 8
#&gt;   .. ..$ Guam                                : num 3.03
#&gt;   .. ..$ Kiribati                            : num 45.4
#&gt;   .. ..$ Marshall Islands                    : num 11.8
#&gt;   .. .. [list output truncated]
#&gt;   .. [list output truncated]</div><div class='input'>
<span class='co'>## Filter all countries with values above 85%</span>
<span class='no'>renewable_energy_above_85</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_energy_by_country</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='no'>x</span> <span class='kw'>&gt;</span> <span class='fl'>85</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"prune"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>renewable_energy_above_85</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ World:List of 1
#&gt;   ..$ Africa:List of 1
#&gt;   .. ..$ Sub-Saharan Africa:List of 3
#&gt;   .. .. ..$ Eastern Africa:List of 7
#&gt;   .. .. .. ..$ Burundi                    : num 89.2
#&gt;   .. .. .. ..$ Ethiopia                   : num 91.9
#&gt;   .. .. .. ..$ Rwanda                     : num 86
#&gt;   .. .. .. ..$ Somalia                    : num 94.7
#&gt;   .. .. .. ..$ Uganda                     : num 88.6
#&gt;   .. .. .. ..$ United Republic of Tanzania: num 86.1
#&gt;   .. .. .. ..$ Zambia                     : num 88.5
#&gt;   .. .. ..$ Middle Africa :List of 2
#&gt;   .. .. .. ..$ Chad                            : num 85.3
#&gt;   .. .. .. ..$ Democratic Republic of the Congo: num 97
#&gt;   .. .. ..$ Western Africa:List of 1
#&gt;   .. .. .. ..$ Guinea-Bissau: num 86.5</div><div class='input'>
<span class='co'># Special arguments .xname and .xpos</span>

<span class='co'>## Apply a function using the name of the node</span>
<span class='no'>renewable_oceania_text</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_oceania</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xname</span>) <span class='fu'><a href='https://rdrr.io/r/base/sprintf.html'>sprintf</a></span>(<span class='st'>"Renewable energy in %s: %.2f%%"</span>, <span class='no'>.xname</span>, <span class='no'>x</span>),
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/funprog.html'>Negate</a></span>(<span class='no'>is.na</span>),
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"flatten"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>renewable_oceania_text</span>, <span class='kw'>list.len</span> <span class='kw'>=</span> <span class='fl'>10</span>)</div><div class='output co'>#&gt; List of 22
#&gt;  $ Australia                       : chr "Renewable energy in Australia: 9.32%"
#&gt;  $ New Zealand                     : chr "Renewable energy in New Zealand: 32.76%"
#&gt;  $ Fiji                            : chr "Renewable energy in Fiji: 24.36%"
#&gt;  $ New Caledonia                   : chr "Renewable energy in New Caledonia: 4.03%"
#&gt;  $ Papua New Guinea                : chr "Renewable energy in Papua New Guinea: 50.34%"
#&gt;  $ Solomon Islands                 : chr "Renewable energy in Solomon Islands: 65.73%"
#&gt;  $ Vanuatu                         : chr "Renewable energy in Vanuatu: 33.67%"
#&gt;  $ Guam                            : chr "Renewable energy in Guam: 3.03%"
#&gt;  $ Kiribati                        : chr "Renewable energy in Kiribati: 45.43%"
#&gt;  $ Marshall Islands                : chr "Renewable energy in Marshall Islands: 11.75%"
#&gt;   [list output truncated]</div><div class='input'>
<span class='co'>## Extract values based on country names</span>
<span class='no'>renewable_benelux</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_energy_by_country</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xname</span>) <span class='no'>.xname</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Belgium"</span>, <span class='st'>"Netherlands"</span>, <span class='st'>"Luxembourg"</span>),
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"prune"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>renewable_benelux</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ World:List of 1
#&gt;   ..$ Europe:List of 1
#&gt;   .. ..$ Western Europe:List of 3
#&gt;   .. .. ..$ Belgium    : num 9.14
#&gt;   .. .. ..$ Luxembourg : num 13.5
#&gt;   .. .. ..$ Netherlands: num 5.78</div><div class='input'>
<span class='co'>## Filter European countries with value above 50%</span>
<span class='no'>renewable_europe_above_50</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_energy_by_country</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xpos</span>) <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='no'>.xpos</span>[<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>)], <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1L</span>, <span class='fl'>5L</span>)) <span class='kw'>&amp;</span> <span class='no'>x</span> <span class='kw'>&gt;</span> <span class='fl'>50</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"prune"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>renewable_europe_above_50</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ World:List of 1
#&gt;   ..$ Europe:List of 2
#&gt;   .. ..$ Northern Europe:List of 3
#&gt;   .. .. ..$ Iceland: num 78.1
#&gt;   .. .. ..$ Norway : num 59.5
#&gt;   .. .. ..$ Sweden : num 51.4
#&gt;   .. ..$ Western Europe :List of 1
#&gt;   .. .. ..$ Liechtenstein: num 62.9</div><div class='input'>
<span class='co'>## Return position of Sweden in list</span>
(<span class='no'>xpos_sweden</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_energy_by_country</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xname</span>) <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='no'>.xname</span>, <span class='st'>"Sweden"</span>),
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xpos</span>) <span class='no'>.xpos</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"flatten"</span>
))</div><div class='output co'>#&gt; $Sweden
#&gt; [1]  1  5  2 14
#&gt; </div><div class='input'><span class='no'>renewable_energy_by_country</span><span class='kw'>[[</span><span class='no'>xpos_sweden</span>$<span class='no'>Sweden</span>]]</div><div class='output co'>#&gt; [1] 51.35
#&gt; attr(,"M49-code")
#&gt; [1] "752"</div><div class='input'>
<span class='co'># List node aggregation</span>

<span class='co'>## Calculate mean value of Europe</span>
<span class='fu'>rrapply</span>(
  <span class='no'>renewable_energy_by_country</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xname</span>) <span class='no'>.xname</span> <span class='kw'>==</span> <span class='st'>"Europe"</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span>(<span class='no'>x</span>), <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>),
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"flatten"</span>,
  <span class='kw'>feverywhere</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</div><div class='output co'>#&gt; $Europe
#&gt; [1] 22.36565
#&gt; </div><div class='input'>
<span class='co'>## Calculate mean value for each continent</span>
<span class='no'>renewable_continent_summary</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_energy_by_country</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xpos</span>) <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>.xpos</span>) <span class='kw'>==</span> <span class='fl'>2</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span>(<span class='no'>x</span>), <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>),
  <span class='kw'>feverywhere</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='co'>## Antarctica's value is missing</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>renewable_continent_summary</span>, <span class='kw'>give.attr</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ World:List of 6
#&gt;   ..$ Africa    : num 54.3
#&gt;   ..$ Americas  : num 18.2
#&gt;   ..$ Antarctica: num NaN
#&gt;   ..$ Asia      : num 17.9
#&gt;   ..$ Europe    : num 22.4
#&gt;   ..$ Oceania   : num 17.8</div><div class='input'>
<span class='co'># List attributes</span>

<span class='co'>## how = "list" preserves all list attributes</span>
<span class='no'>na_drop_oceania_attr</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_oceania</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://rdrr.io/r/base/replace.html'>replace</a></span>(<span class='no'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span>(<span class='no'>x</span>), <span class='fl'>0</span>),
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"list"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>na_drop_oceania_attr</span>, <span class='kw'>max.level</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ Oceania:List of 4
#&gt;   ..$ Australia and New Zealand:List of 6
#&gt;   .. ..- attr(*, "M49-code")= chr "053"
#&gt;   ..$ Melanesia                :List of 5
#&gt;   .. ..- attr(*, "M49-code")= chr "054"
#&gt;   ..$ Micronesia               :List of 8
#&gt;   .. ..- attr(*, "M49-code")= chr "057"
#&gt;   ..$ Polynesia                :List of 10
#&gt;   .. ..- attr(*, "M49-code")= chr "061"
#&gt;   ..- attr(*, "M49-code")= chr "009"</div><div class='input'>
<span class='co'>## how = "prune" also preserves list attributes</span>
<span class='no'>na_drop_oceania_attr2</span> <span class='kw'>&lt;-</span> <span class='fu'>rrapply</span>(
  <span class='no'>renewable_oceania</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/funprog.html'>Negate</a></span>(<span class='no'>is.na</span>),
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"prune"</span>
)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>na_drop_oceania_attr2</span>, <span class='kw'>max.level</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; List of 1
#&gt;  $ Oceania:List of 4
#&gt;   ..$ Australia and New Zealand:List of 2
#&gt;   .. ..- attr(*, "M49-code")= chr "053"
#&gt;   ..$ Melanesia                :List of 5
#&gt;   .. ..- attr(*, "M49-code")= chr "054"
#&gt;   ..$ Micronesia               :List of 7
#&gt;   .. ..- attr(*, "M49-code")= chr "057"
#&gt;   ..$ Polynesia                :List of 8
#&gt;   .. ..- attr(*, "M49-code")= chr "061"
#&gt;   ..- attr(*, "M49-code")= chr "009"</div><div class='input'>
<span class='co'># Applying functions to data.frames</span>

<span class='co'>## Scale only Sepal columns in iris dataset</span>
<span class='fu'>rrapply</span>(
  <span class='no'>iris</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>.xname</span>) <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grepl</a></span>(<span class='st'>"Sepal"</span>, <span class='no'>.xname</span>),
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='no'>scale</span>
)</div><div class='output co'>#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
#&gt; 1    -0.89767388  1.01560199          1.4         0.2     setosa
#&gt; 2    -1.13920048 -0.13153881          1.4         0.2     setosa
#&gt; 3    -1.38072709  0.32731751          1.3         0.2     setosa
#&gt; 4    -1.50149039  0.09788935          1.5         0.2     setosa
#&gt; 5    -1.01843718  1.24503015          1.4         0.2     setosa
#&gt; 6    -0.53538397  1.93331463          1.7         0.4     setosa
#&gt; 7    -1.50149039  0.78617383          1.4         0.3     setosa
#&gt; 8    -1.01843718  0.78617383          1.5         0.2     setosa
#&gt; 9    -1.74301699 -0.36096697          1.4         0.2     setosa
#&gt; 10   -1.13920048  0.09788935          1.5         0.1     setosa
#&gt; 11   -0.53538397  1.47445831          1.5         0.2     setosa
#&gt; 12   -1.25996379  0.78617383          1.6         0.2     setosa
#&gt; 13   -1.25996379 -0.13153881          1.4         0.1     setosa
#&gt; 14   -1.86378030 -0.13153881          1.1         0.1     setosa
#&gt; 15   -0.05233076  2.16274279          1.2         0.2     setosa
#&gt; 16   -0.17309407  3.08045544          1.5         0.4     setosa
#&gt; 17   -0.53538397  1.93331463          1.3         0.4     setosa
#&gt; 18   -0.89767388  1.01560199          1.4         0.3     setosa
#&gt; 19   -0.17309407  1.70388647          1.7         0.3     setosa
#&gt; 20   -0.89767388  1.70388647          1.5         0.3     setosa
#&gt; 21   -0.53538397  0.78617383          1.7         0.2     setosa
#&gt; 22   -0.89767388  1.47445831          1.5         0.4     setosa
#&gt; 23   -1.50149039  1.24503015          1.0         0.2     setosa
#&gt; 24   -0.89767388  0.55674567          1.7         0.5     setosa
#&gt; 25   -1.25996379  0.78617383          1.9         0.2     setosa
#&gt; 26   -1.01843718 -0.13153881          1.6         0.2     setosa
#&gt; 27   -1.01843718  0.78617383          1.6         0.4     setosa
#&gt; 28   -0.77691058  1.01560199          1.5         0.2     setosa
#&gt; 29   -0.77691058  0.78617383          1.4         0.2     setosa
#&gt; 30   -1.38072709  0.32731751          1.6         0.2     setosa
#&gt; 31   -1.25996379  0.09788935          1.6         0.2     setosa
#&gt; 32   -0.53538397  0.78617383          1.5         0.4     setosa
#&gt; 33   -0.77691058  2.39217095          1.5         0.1     setosa
#&gt; 34   -0.41462067  2.62159911          1.4         0.2     setosa
#&gt; 35   -1.13920048  0.09788935          1.5         0.2     setosa
#&gt; 36   -1.01843718  0.32731751          1.2         0.2     setosa
#&gt; 37   -0.41462067  1.01560199          1.3         0.2     setosa
#&gt; 38   -1.13920048  1.24503015          1.4         0.1     setosa
#&gt; 39   -1.74301699 -0.13153881          1.3         0.2     setosa
#&gt; 40   -0.89767388  0.78617383          1.5         0.2     setosa
#&gt; 41   -1.01843718  1.01560199          1.3         0.3     setosa
#&gt; 42   -1.62225369 -1.73753594          1.3         0.3     setosa
#&gt; 43   -1.74301699  0.32731751          1.3         0.2     setosa
#&gt; 44   -1.01843718  1.01560199          1.6         0.6     setosa
#&gt; 45   -0.89767388  1.70388647          1.9         0.4     setosa
#&gt; 46   -1.25996379 -0.13153881          1.4         0.3     setosa
#&gt; 47   -0.89767388  1.70388647          1.6         0.2     setosa
#&gt; 48   -1.50149039  0.32731751          1.4         0.2     setosa
#&gt; 49   -0.65614727  1.47445831          1.5         0.2     setosa
#&gt; 50   -1.01843718  0.55674567          1.4         0.2     setosa
#&gt; 51    1.39682886  0.32731751          4.7         1.4 versicolor
#&gt; 52    0.67224905  0.32731751          4.5         1.5 versicolor
#&gt; 53    1.27606556  0.09788935          4.9         1.5 versicolor
#&gt; 54   -0.41462067 -1.73753594          4.0         1.3 versicolor
#&gt; 55    0.79301235 -0.59039513          4.6         1.5 versicolor
#&gt; 56   -0.17309407 -0.59039513          4.5         1.3 versicolor
#&gt; 57    0.55148575  0.55674567          4.7         1.6 versicolor
#&gt; 58   -1.13920048 -1.50810778          3.3         1.0 versicolor
#&gt; 59    0.91377565 -0.36096697          4.6         1.3 versicolor
#&gt; 60   -0.77691058 -0.81982329          3.9         1.4 versicolor
#&gt; 61   -1.01843718 -2.42582042          3.5         1.0 versicolor
#&gt; 62    0.06843254 -0.13153881          4.2         1.5 versicolor
#&gt; 63    0.18919584 -1.96696410          4.0         1.0 versicolor
#&gt; 64    0.30995914 -0.36096697          4.7         1.4 versicolor
#&gt; 65   -0.29385737 -0.36096697          3.6         1.3 versicolor
#&gt; 66    1.03453895  0.09788935          4.4         1.4 versicolor
#&gt; 67   -0.29385737 -0.13153881          4.5         1.5 versicolor
#&gt; 68   -0.05233076 -0.81982329          4.1         1.0 versicolor
#&gt; 69    0.43072244 -1.96696410          4.5         1.5 versicolor
#&gt; 70   -0.29385737 -1.27867961          3.9         1.1 versicolor
#&gt; 71    0.06843254  0.32731751          4.8         1.8 versicolor
#&gt; 72    0.30995914 -0.59039513          4.0         1.3 versicolor
#&gt; 73    0.55148575 -1.27867961          4.9         1.5 versicolor
#&gt; 74    0.30995914 -0.59039513          4.7         1.2 versicolor
#&gt; 75    0.67224905 -0.36096697          4.3         1.3 versicolor
#&gt; 76    0.91377565 -0.13153881          4.4         1.4 versicolor
#&gt; 77    1.15530226 -0.59039513          4.8         1.4 versicolor
#&gt; 78    1.03453895 -0.13153881          5.0         1.7 versicolor
#&gt; 79    0.18919584 -0.36096697          4.5         1.5 versicolor
#&gt; 80   -0.17309407 -1.04925145          3.5         1.0 versicolor
#&gt; 81   -0.41462067 -1.50810778          3.8         1.1 versicolor
#&gt; 82   -0.41462067 -1.50810778          3.7         1.0 versicolor
#&gt; 83   -0.05233076 -0.81982329          3.9         1.2 versicolor
#&gt; 84    0.18919584 -0.81982329          5.1         1.6 versicolor
#&gt; 85   -0.53538397 -0.13153881          4.5         1.5 versicolor
#&gt; 86    0.18919584  0.78617383          4.5         1.6 versicolor
#&gt; 87    1.03453895  0.09788935          4.7         1.5 versicolor
#&gt; 88    0.55148575 -1.73753594          4.4         1.3 versicolor
#&gt; 89   -0.29385737 -0.13153881          4.1         1.3 versicolor
#&gt; 90   -0.41462067 -1.27867961          4.0         1.3 versicolor
#&gt; 91   -0.41462067 -1.04925145          4.4         1.2 versicolor
#&gt; 92    0.30995914 -0.13153881          4.6         1.4 versicolor
#&gt; 93   -0.05233076 -1.04925145          4.0         1.2 versicolor
#&gt; 94   -1.01843718 -1.73753594          3.3         1.0 versicolor
#&gt; 95   -0.29385737 -0.81982329          4.2         1.3 versicolor
#&gt; 96   -0.17309407 -0.13153881          4.2         1.2 versicolor
#&gt; 97   -0.17309407 -0.36096697          4.2         1.3 versicolor
#&gt; 98    0.43072244 -0.36096697          4.3         1.3 versicolor
#&gt; 99   -0.89767388 -1.27867961          3.0         1.1 versicolor
#&gt; 100  -0.17309407 -0.59039513          4.1         1.3 versicolor
#&gt; 101   0.55148575  0.55674567          6.0         2.5  virginica
#&gt; 102  -0.05233076 -0.81982329          5.1         1.9  virginica
#&gt; 103   1.51759216 -0.13153881          5.9         2.1  virginica
#&gt; 104   0.55148575 -0.36096697          5.6         1.8  virginica
#&gt; 105   0.79301235 -0.13153881          5.8         2.2  virginica
#&gt; 106   2.12140867 -0.13153881          6.6         2.1  virginica
#&gt; 107  -1.13920048 -1.27867961          4.5         1.7  virginica
#&gt; 108   1.75911877 -0.36096697          6.3         1.8  virginica
#&gt; 109   1.03453895 -1.27867961          5.8         1.8  virginica
#&gt; 110   1.63835547  1.24503015          6.1         2.5  virginica
#&gt; 111   0.79301235  0.32731751          5.1         2.0  virginica
#&gt; 112   0.67224905 -0.81982329          5.3         1.9  virginica
#&gt; 113   1.15530226 -0.13153881          5.5         2.1  virginica
#&gt; 114  -0.17309407 -1.27867961          5.0         2.0  virginica
#&gt; 115  -0.05233076 -0.59039513          5.1         2.4  virginica
#&gt; 116   0.67224905  0.32731751          5.3         2.3  virginica
#&gt; 117   0.79301235 -0.13153881          5.5         1.8  virginica
#&gt; 118   2.24217198  1.70388647          6.7         2.2  virginica
#&gt; 119   2.24217198 -1.04925145          6.9         2.3  virginica
#&gt; 120   0.18919584 -1.96696410          5.0         1.5  virginica
#&gt; 121   1.27606556  0.32731751          5.7         2.3  virginica
#&gt; 122  -0.29385737 -0.59039513          4.9         2.0  virginica
#&gt; 123   2.24217198 -0.59039513          6.7         2.0  virginica
#&gt; 124   0.55148575 -0.81982329          4.9         1.8  virginica
#&gt; 125   1.03453895  0.55674567          5.7         2.1  virginica
#&gt; 126   1.63835547  0.32731751          6.0         1.8  virginica
#&gt; 127   0.43072244 -0.59039513          4.8         1.8  virginica
#&gt; 128   0.30995914 -0.13153881          4.9         1.8  virginica
#&gt; 129   0.67224905 -0.59039513          5.6         2.1  virginica
#&gt; 130   1.63835547 -0.13153881          5.8         1.6  virginica
#&gt; 131   1.87988207 -0.59039513          6.1         1.9  virginica
#&gt; 132   2.48369858  1.70388647          6.4         2.0  virginica
#&gt; 133   0.67224905 -0.59039513          5.6         2.2  virginica
#&gt; 134   0.55148575 -0.59039513          5.1         1.5  virginica
#&gt; 135   0.30995914 -1.04925145          5.6         1.4  virginica
#&gt; 136   2.24217198 -0.13153881          6.1         2.3  virginica
#&gt; 137   0.55148575  0.78617383          5.6         2.4  virginica
#&gt; 138   0.67224905  0.09788935          5.5         1.8  virginica
#&gt; 139   0.18919584 -0.13153881          4.8         1.8  virginica
#&gt; 140   1.27606556  0.09788935          5.4         2.1  virginica
#&gt; 141   1.03453895  0.09788935          5.6         2.4  virginica
#&gt; 142   1.27606556  0.09788935          5.1         2.3  virginica
#&gt; 143  -0.05233076 -0.81982329          5.1         1.9  virginica
#&gt; 144   1.15530226  0.32731751          5.9         2.3  virginica
#&gt; 145   1.03453895  0.55674567          5.7         2.5  virginica
#&gt; 146   1.03453895 -0.13153881          5.2         2.3  virginica
#&gt; 147   0.55148575 -1.27867961          5.0         1.9  virginica
#&gt; 148   0.79301235 -0.13153881          5.2         2.0  virginica
#&gt; 149   0.43072244  0.78617383          5.4         2.3  virginica
#&gt; 150   0.06843254 -0.13153881          5.1         1.8  virginica</div><div class='input'>
<span class='co'>## Scale and keep only numeric columns</span>
<span class='fu'>rrapply</span>(
  <span class='no'>iris</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='no'>scale</span>,
  <span class='kw'>classes</span> <span class='kw'>=</span> <span class='st'>"numeric"</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"prune"</span>
)</div><div class='output co'>#&gt;     Sepal.Length Sepal.Width Petal.Length   Petal.Width
#&gt; 1    -0.89767388  1.01560199  -1.33575163 -1.3110521482
#&gt; 2    -1.13920048 -0.13153881  -1.33575163 -1.3110521482
#&gt; 3    -1.38072709  0.32731751  -1.39239929 -1.3110521482
#&gt; 4    -1.50149039  0.09788935  -1.27910398 -1.3110521482
#&gt; 5    -1.01843718  1.24503015  -1.33575163 -1.3110521482
#&gt; 6    -0.53538397  1.93331463  -1.16580868 -1.0486667950
#&gt; 7    -1.50149039  0.78617383  -1.33575163 -1.1798594716
#&gt; 8    -1.01843718  0.78617383  -1.27910398 -1.3110521482
#&gt; 9    -1.74301699 -0.36096697  -1.33575163 -1.3110521482
#&gt; 10   -1.13920048  0.09788935  -1.27910398 -1.4422448248
#&gt; 11   -0.53538397  1.47445831  -1.27910398 -1.3110521482
#&gt; 12   -1.25996379  0.78617383  -1.22245633 -1.3110521482
#&gt; 13   -1.25996379 -0.13153881  -1.33575163 -1.4422448248
#&gt; 14   -1.86378030 -0.13153881  -1.50569459 -1.4422448248
#&gt; 15   -0.05233076  2.16274279  -1.44904694 -1.3110521482
#&gt; 16   -0.17309407  3.08045544  -1.27910398 -1.0486667950
#&gt; 17   -0.53538397  1.93331463  -1.39239929 -1.0486667950
#&gt; 18   -0.89767388  1.01560199  -1.33575163 -1.1798594716
#&gt; 19   -0.17309407  1.70388647  -1.16580868 -1.1798594716
#&gt; 20   -0.89767388  1.70388647  -1.27910398 -1.1798594716
#&gt; 21   -0.53538397  0.78617383  -1.16580868 -1.3110521482
#&gt; 22   -0.89767388  1.47445831  -1.27910398 -1.0486667950
#&gt; 23   -1.50149039  1.24503015  -1.56234224 -1.3110521482
#&gt; 24   -0.89767388  0.55674567  -1.16580868 -0.9174741184
#&gt; 25   -1.25996379  0.78617383  -1.05251337 -1.3110521482
#&gt; 26   -1.01843718 -0.13153881  -1.22245633 -1.3110521482
#&gt; 27   -1.01843718  0.78617383  -1.22245633 -1.0486667950
#&gt; 28   -0.77691058  1.01560199  -1.27910398 -1.3110521482
#&gt; 29   -0.77691058  0.78617383  -1.33575163 -1.3110521482
#&gt; 30   -1.38072709  0.32731751  -1.22245633 -1.3110521482
#&gt; 31   -1.25996379  0.09788935  -1.22245633 -1.3110521482
#&gt; 32   -0.53538397  0.78617383  -1.27910398 -1.0486667950
#&gt; 33   -0.77691058  2.39217095  -1.27910398 -1.4422448248
#&gt; 34   -0.41462067  2.62159911  -1.33575163 -1.3110521482
#&gt; 35   -1.13920048  0.09788935  -1.27910398 -1.3110521482
#&gt; 36   -1.01843718  0.32731751  -1.44904694 -1.3110521482
#&gt; 37   -0.41462067  1.01560199  -1.39239929 -1.3110521482
#&gt; 38   -1.13920048  1.24503015  -1.33575163 -1.4422448248
#&gt; 39   -1.74301699 -0.13153881  -1.39239929 -1.3110521482
#&gt; 40   -0.89767388  0.78617383  -1.27910398 -1.3110521482
#&gt; 41   -1.01843718  1.01560199  -1.39239929 -1.1798594716
#&gt; 42   -1.62225369 -1.73753594  -1.39239929 -1.1798594716
#&gt; 43   -1.74301699  0.32731751  -1.39239929 -1.3110521482
#&gt; 44   -1.01843718  1.01560199  -1.22245633 -0.7862814418
#&gt; 45   -0.89767388  1.70388647  -1.05251337 -1.0486667950
#&gt; 46   -1.25996379 -0.13153881  -1.33575163 -1.1798594716
#&gt; 47   -0.89767388  1.70388647  -1.22245633 -1.3110521482
#&gt; 48   -1.50149039  0.32731751  -1.33575163 -1.3110521482
#&gt; 49   -0.65614727  1.47445831  -1.27910398 -1.3110521482
#&gt; 50   -1.01843718  0.55674567  -1.33575163 -1.3110521482
#&gt; 51    1.39682886  0.32731751   0.53362088  0.2632599711
#&gt; 52    0.67224905  0.32731751   0.42032558  0.3944526477
#&gt; 53    1.27606556  0.09788935   0.64691619  0.3944526477
#&gt; 54   -0.41462067 -1.73753594   0.13708732  0.1320672944
#&gt; 55    0.79301235 -0.59039513   0.47697323  0.3944526477
#&gt; 56   -0.17309407 -0.59039513   0.42032558  0.1320672944
#&gt; 57    0.55148575  0.55674567   0.53362088  0.5256453243
#&gt; 58   -1.13920048 -1.50810778  -0.25944625 -0.2615107354
#&gt; 59    0.91377565 -0.36096697   0.47697323  0.1320672944
#&gt; 60   -0.77691058 -0.81982329   0.08043967  0.2632599711
#&gt; 61   -1.01843718 -2.42582042  -0.14615094 -0.2615107354
#&gt; 62    0.06843254 -0.13153881   0.25038262  0.3944526477
#&gt; 63    0.18919584 -1.96696410   0.13708732 -0.2615107354
#&gt; 64    0.30995914 -0.36096697   0.53362088  0.2632599711
#&gt; 65   -0.29385737 -0.36096697  -0.08950329  0.1320672944
#&gt; 66    1.03453895  0.09788935   0.36367793  0.2632599711
#&gt; 67   -0.29385737 -0.13153881   0.42032558  0.3944526477
#&gt; 68   -0.05233076 -0.81982329   0.19373497 -0.2615107354
#&gt; 69    0.43072244 -1.96696410   0.42032558  0.3944526477
#&gt; 70   -0.29385737 -1.27867961   0.08043967 -0.1303180588
#&gt; 71    0.06843254  0.32731751   0.59026853  0.7880306775
#&gt; 72    0.30995914 -0.59039513   0.13708732  0.1320672944
#&gt; 73    0.55148575 -1.27867961   0.64691619  0.3944526477
#&gt; 74    0.30995914 -0.59039513   0.53362088  0.0008746178
#&gt; 75    0.67224905 -0.36096697   0.30703027  0.1320672944
#&gt; 76    0.91377565 -0.13153881   0.36367793  0.2632599711
#&gt; 77    1.15530226 -0.59039513   0.59026853  0.2632599711
#&gt; 78    1.03453895 -0.13153881   0.70356384  0.6568380009
#&gt; 79    0.18919584 -0.36096697   0.42032558  0.3944526477
#&gt; 80   -0.17309407 -1.04925145  -0.14615094 -0.2615107354
#&gt; 81   -0.41462067 -1.50810778   0.02379201 -0.1303180588
#&gt; 82   -0.41462067 -1.50810778  -0.03285564 -0.2615107354
#&gt; 83   -0.05233076 -0.81982329   0.08043967  0.0008746178
#&gt; 84    0.18919584 -0.81982329   0.76021149  0.5256453243
#&gt; 85   -0.53538397 -0.13153881   0.42032558  0.3944526477
#&gt; 86    0.18919584  0.78617383   0.42032558  0.5256453243
#&gt; 87    1.03453895  0.09788935   0.53362088  0.3944526477
#&gt; 88    0.55148575 -1.73753594   0.36367793  0.1320672944
#&gt; 89   -0.29385737 -0.13153881   0.19373497  0.1320672944
#&gt; 90   -0.41462067 -1.27867961   0.13708732  0.1320672944
#&gt; 91   -0.41462067 -1.04925145   0.36367793  0.0008746178
#&gt; 92    0.30995914 -0.13153881   0.47697323  0.2632599711
#&gt; 93   -0.05233076 -1.04925145   0.13708732  0.0008746178
#&gt; 94   -1.01843718 -1.73753594  -0.25944625 -0.2615107354
#&gt; 95   -0.29385737 -0.81982329   0.25038262  0.1320672944
#&gt; 96   -0.17309407 -0.13153881   0.25038262  0.0008746178
#&gt; 97   -0.17309407 -0.36096697   0.25038262  0.1320672944
#&gt; 98    0.43072244 -0.36096697   0.30703027  0.1320672944
#&gt; 99   -0.89767388 -1.27867961  -0.42938920 -0.1303180588
#&gt; 100  -0.17309407 -0.59039513   0.19373497  0.1320672944
#&gt; 101   0.55148575  0.55674567   1.27004036  1.7063794137
#&gt; 102  -0.05233076 -0.81982329   0.76021149  0.9192233541
#&gt; 103   1.51759216 -0.13153881   1.21339271  1.1816087073
#&gt; 104   0.55148575 -0.36096697   1.04344975  0.7880306775
#&gt; 105   0.79301235 -0.13153881   1.15674505  1.3128013839
#&gt; 106   2.12140867 -0.13153881   1.60992627  1.1816087073
#&gt; 107  -1.13920048 -1.27867961   0.42032558  0.6568380009
#&gt; 108   1.75911877 -0.36096697   1.43998331  0.7880306775
#&gt; 109   1.03453895 -1.27867961   1.15674505  0.7880306775
#&gt; 110   1.63835547  1.24503015   1.32668801  1.7063794137
#&gt; 111   0.79301235  0.32731751   0.76021149  1.0504160307
#&gt; 112   0.67224905 -0.81982329   0.87350679  0.9192233541
#&gt; 113   1.15530226 -0.13153881   0.98680210  1.1816087073
#&gt; 114  -0.17309407 -1.27867961   0.70356384  1.0504160307
#&gt; 115  -0.05233076 -0.59039513   0.76021149  1.5751867371
#&gt; 116   0.67224905  0.32731751   0.87350679  1.4439940605
#&gt; 117   0.79301235 -0.13153881   0.98680210  0.7880306775
#&gt; 118   2.24217198  1.70388647   1.66657392  1.3128013839
#&gt; 119   2.24217198 -1.04925145   1.77986923  1.4439940605
#&gt; 120   0.18919584 -1.96696410   0.70356384  0.3944526477
#&gt; 121   1.27606556  0.32731751   1.10009740  1.4439940605
#&gt; 122  -0.29385737 -0.59039513   0.64691619  1.0504160307
#&gt; 123   2.24217198 -0.59039513   1.66657392  1.0504160307
#&gt; 124   0.55148575 -0.81982329   0.64691619  0.7880306775
#&gt; 125   1.03453895  0.55674567   1.10009740  1.1816087073
#&gt; 126   1.63835547  0.32731751   1.27004036  0.7880306775
#&gt; 127   0.43072244 -0.59039513   0.59026853  0.7880306775
#&gt; 128   0.30995914 -0.13153881   0.64691619  0.7880306775
#&gt; 129   0.67224905 -0.59039513   1.04344975  1.1816087073
#&gt; 130   1.63835547 -0.13153881   1.15674505  0.5256453243
#&gt; 131   1.87988207 -0.59039513   1.32668801  0.9192233541
#&gt; 132   2.48369858  1.70388647   1.49663097  1.0504160307
#&gt; 133   0.67224905 -0.59039513   1.04344975  1.3128013839
#&gt; 134   0.55148575 -0.59039513   0.76021149  0.3944526477
#&gt; 135   0.30995914 -1.04925145   1.04344975  0.2632599711
#&gt; 136   2.24217198 -0.13153881   1.32668801  1.4439940605
#&gt; 137   0.55148575  0.78617383   1.04344975  1.5751867371
#&gt; 138   0.67224905  0.09788935   0.98680210  0.7880306775
#&gt; 139   0.18919584 -0.13153881   0.59026853  0.7880306775
#&gt; 140   1.27606556  0.09788935   0.93015445  1.1816087073
#&gt; 141   1.03453895  0.09788935   1.04344975  1.5751867371
#&gt; 142   1.27606556  0.09788935   0.76021149  1.4439940605
#&gt; 143  -0.05233076 -0.81982329   0.76021149  0.9192233541
#&gt; 144   1.15530226  0.32731751   1.21339271  1.4439940605
#&gt; 145   1.03453895  0.55674567   1.10009740  1.7063794137
#&gt; 146   1.03453895 -0.13153881   0.81685914  1.4439940605
#&gt; 147   0.55148575 -1.27867961   0.70356384  0.9192233541
#&gt; 148   0.79301235 -0.13153881   0.81685914  1.0504160307
#&gt; 149   0.43072244  0.78617383   0.93015445  1.4439940605
#&gt; 150   0.06843254 -0.13153881   0.76021149  0.7880306775</div><div class='input'>
<span class='co'>## Summarize only numeric columns with how = "flatten"</span>
<span class='fu'>rrapply</span>(
  <span class='no'>iris</span>,
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='no'>summary</span>,
  <span class='kw'>classes</span> <span class='kw'>=</span> <span class='st'>"numeric"</span>,
  <span class='kw'>how</span> <span class='kw'>=</span> <span class='st'>"flatten"</span>
)</div><div class='output co'>#&gt; $Sepal.Length
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   4.300   5.100   5.800   5.843   6.400   7.900 
#&gt; 
#&gt; $Sepal.Width
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   2.000   2.800   3.000   3.057   3.300   4.400 
#&gt; 
#&gt; $Petal.Length
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   1.600   4.350   3.758   5.100   6.900 
#&gt; 
#&gt; $Petal.Width
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   0.100   0.300   1.300   1.199   1.800   2.500 
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joris Chau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


